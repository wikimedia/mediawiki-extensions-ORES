{
  "comments": [
    {
      "key": {
        "uuid": "1e8a2541_9632e738",
        "filename": "includes/Hooks.php",
        "patchSetId": 1
      },
      "lineNbr": 70,
      "author": {
        "id": 5
      },
      "writtenOn": "2018-09-12T19:31:26Z",
      "side": 1,
      "message": "This will add these ORES config vars to every single page view, indiscriminately. Making this conditional on $oresData like the below probably won\u0027t work (because that\u0027s only set on RC/WL), but maybe it could be part of an RL module instead.\n\nCC @Krinkle for his thoughts.",
      "revId": "7841c5b7f20737f1230ce0febfe70f23acbea31f",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "67eb3791_7f0e1026",
        "filename": "includes/Hooks.php",
        "patchSetId": 1
      },
      "lineNbr": 70,
      "author": {
        "id": 34
      },
      "writtenOn": "2018-09-12T19:42:35Z",
      "side": 1,
      "message": "Which code needs these, and which pages does it load on? While somewhat fragile as long as they can be kept in sync with addModules(), that work work, although it would make it blocking HTML.\n\nWould prefer to turn the relevant module into a FileModule subclass that prepends this config to getScript(), see JQueryMsgModule and LanguageModule in core for examples. It\u0027s a tad ugly, but should get better \"soon\".",
      "parentUuid": "1e8a2541_9632e738",
      "revId": "7841c5b7f20737f1230ce0febfe70f23acbea31f",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cc8685d6_3fa41348",
        "filename": "includes/Hooks.php",
        "patchSetId": 1
      },
      "lineNbr": 70,
      "author": {
        "id": 920
      },
      "writtenOn": "2018-09-17T11:41:45Z",
      "side": 1,
      "message": "The plan is to inject these configs and a light-weight script on every page to let users build gadgets on top of that. Similar to what mw.Api offers. This is the code that depends on this: https://gerrit.wikimedia.org/r/c/mediawiki/extensions/ORES/+/459561/1/modules/ext.ores.api.js\nThe thing is gadgets calling the ores service already built for page views, history, categories, RC, WL, and basically every sort of page.\nThis reduces size of gadgets people write for ORES drastically but now I\u0027m thinking about this in more depth. I think we can made it a module and ask users to add it as a dependency. That would remove basically need of injecting the mw.Ores.Api module for logged-out users and users who don\u0027t need the code.",
      "parentUuid": "67eb3791_7f0e1026",
      "revId": "7841c5b7f20737f1230ce0febfe70f23acbea31f",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c1230a7b_02a8900f",
        "filename": "includes/Hooks.php",
        "patchSetId": 1
      },
      "lineNbr": 70,
      "author": {
        "id": 5
      },
      "writtenOn": "2018-09-18T22:58:27Z",
      "side": 1,
      "message": "If https://gerrit.wikimedia.org/r/c/mediawiki/core/+/460953 is merged, you could add \"configVars\": { ... } to the module definition for the ext.ores.api module. You then wouldn\u0027t have to load ext.ores.api on every page, because Gadgets that need it can declare it as a dependency.\n\nHowever, Krinkle and I are still going back and forth on what this configVars stuff should look like exactly, so it could be changed/renamed in the next week or two.",
      "parentUuid": "cc8685d6_3fa41348",
      "revId": "7841c5b7f20737f1230ce0febfe70f23acbea31f",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": true
    }
  ]
}