{
  "comments": [
    {
      "key": {
        "uuid": "8e46e3ee_6f52ab6c",
        "filename": "includes/Hooks.php",
        "patchSetId": 3
      },
      "lineNbr": 73,
      "author": {
        "id": 16
      },
      "writtenOn": "2017-03-10T02:41:30Z",
      "side": 1,
      "message": "JobQueueGroup::singleton() can be reused. Also push() could take both jobs in an array.",
      "revId": "3b4b18ae4f61e63f8ed7b4f9213b81cf1097575b",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e46e3ee_cfd41fc1",
        "filename": "includes/Hooks.php",
        "patchSetId": 3
      },
      "lineNbr": 73,
      "author": {
        "id": 5
      },
      "writtenOn": "2017-03-10T02:51:18Z",
      "side": 1,
      "message": "I actually meant to use lazyPush() below to emulate the RC code, I changed it to push() but forgot to change it back. Should I use push() for both, or lazyPush() for both, or push() for this one and lazyPush() for the new one?",
      "parentUuid": "8e46e3ee_6f52ab6c",
      "revId": "3b4b18ae4f61e63f8ed7b4f9213b81cf1097575b",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e46e3ee_cf55ff53",
        "filename": "includes/Hooks.php",
        "patchSetId": 3
      },
      "lineNbr": 79,
      "author": {
        "id": 16
      },
      "writtenOn": "2017-03-10T02:41:30Z",
      "side": 1,
      "message": "This should avoid using different titles for each page being edited, so de-duplication can work.",
      "revId": "3b4b18ae4f61e63f8ed7b4f9213b81cf1097575b",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e46e3ee_6fe14b97",
        "filename": "includes/Hooks.php",
        "patchSetId": 3
      },
      "lineNbr": 79,
      "author": {
        "id": 5
      },
      "writtenOn": "2017-03-10T02:51:18Z",
      "side": 1,
      "message": "Aah, interesting. I copied this from the RC purge job without understanding what the title parameter was for. Should that job also pass in a generic title?",
      "parentUuid": "8e46e3ee_cf55ff53",
      "revId": "3b4b18ae4f61e63f8ed7b4f9213b81cf1097575b",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e46e3ee_8f4ff7bf",
        "filename": "includes/PurgeScoresJob.php",
        "patchSetId": 3
      },
      "lineNbr": 20,
      "author": {
        "id": 16
      },
      "writtenOn": "2017-03-10T02:41:30Z",
      "side": 1,
      "message": "$this-\u003eremoveDuplicates \u003d true;",
      "revId": "3b4b18ae4f61e63f8ed7b4f9213b81cf1097575b",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e46e3ee_8fde17dd",
        "filename": "includes/PurgeScoresJob.php",
        "patchSetId": 3
      },
      "lineNbr": 20,
      "author": {
        "id": 5
      },
      "writtenOn": "2017-03-10T02:51:18Z",
      "side": 1,
      "message": "Good point.",
      "parentUuid": "8e46e3ee_8f4ff7bf",
      "revId": "3b4b18ae4f61e63f8ed7b4f9213b81cf1097575b",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e46e3ee_2fc3430c",
        "filename": "includes/PurgeScoresJob.php",
        "patchSetId": 3
      },
      "lineNbr": 34,
      "author": {
        "id": 16
      },
      "writtenOn": "2017-03-10T02:41:30Z",
      "side": 1,
      "message": "This will have occasional oddness with imported revisions (e.g. if $cutoffRevid is an imported rev it will delete more rows than is proper since the rev_id might be very high in spite of the rev_timestamp).\n\nSome JOIN sanity checks in the ores table query might avoid mass deletes due to this. Another option is to use \"NOT EXISTS (SELECT 1 from logging WHERE log_type\u003d\u0027import\u0027 AND log_page\u003drev_id AND log_timestamp \u003e\u003d rev_timestamp)\". Something like that should avoid the edge case of picking an imported revision.",
      "revId": "3b4b18ae4f61e63f8ed7b4f9213b81cf1097575b",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e46e3ee_2fea6374",
        "filename": "includes/PurgeScoresJob.php",
        "patchSetId": 3
      },
      "lineNbr": 34,
      "author": {
        "id": 5
      },
      "writtenOn": "2017-03-10T02:51:18Z",
      "side": 1,
      "message": "Ah, I see what you\u0027re saying, imported revisions are backdated.  Good catch. I\u0027ll add a JOIN to the query on line 54 to verify rev_timestamp is indeed before the cutoff. I do think I need the $cutoffRevid optimization though, otherwise that query would be quite slow.",
      "parentUuid": "8e46e3ee_2fc3430c",
      "revId": "3b4b18ae4f61e63f8ed7b4f9213b81cf1097575b",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}