{
  "comments": [
    {
      "key": {
        "uuid": "c0cd5c4e_8441be03",
        "filename": "modules/ext.ores.highlighter.js",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1453
      },
      "writtenOn": "2019-01-24T09:02:10Z",
      "side": 1,
      "message": "To be honest I don\u0027t like to use querySelector() in code that otherwise uses jQuery, even if the compatibility matrix is fine nowadays: https://caniuse.com/#feat\u003dqueryselector.\n\nWhy not just inline the jQuery call here?\n\n if ( !$( \u0027.mw-changeslist, .mw-contributions-list\u0027 ).length ) {\n\nAs far as I can see this solves the issue. When there is no variable any more, there is no reference to the possibly expensive result any more, no matter what the following code does.\n\nOr do this after the if():\n\n $changesList \u003d undefined;",
      "range": {
        "startLine": 9,
        "startChar": 1,
        "endLine": 9,
        "endChar": 78
      },
      "revId": "6307661938aff4dc2b31b4e553665a1a9af282ab",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "22d7b9d3_4ceff530",
        "filename": "modules/ext.ores.highlighter.js",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 34
      },
      "writtenOn": "2019-01-25T20:25:30Z",
      "side": 1,
      "message": "As of MW 1.27, RL distinguishes between Grade A/X and C based on features, not user agents.\n\nhttps://github.com/wikimedia/mediawiki/blob/1.32.0/resources/src/startup/startup.js#L62\n\nWhich means with high certainty (short of unprecedented acts like an API disappearing mid-way), no JS is delivered to browsers without querySelector, even unsupported browsers. And likewise, it is delivered to those with the API.",
      "parentUuid": "c0cd5c4e_8441be03",
      "range": {
        "startLine": 9,
        "startChar": 1,
        "endLine": 9,
        "endChar": 78
      },
      "revId": "6307661938aff4dc2b31b4e553665a1a9af282ab",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "57008ecd_ba02c15a",
        "filename": "modules/ext.ores.highlighter.js",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1453
      },
      "writtenOn": "2019-01-28T14:06:31Z",
      "side": 1,
      "message": "Oh, thanks for that certainly helpful clarification. But that\u0027s not what I meant. This short file is now mixing two very different APIs to select elements. I think this makes this code less readable and somewhat confusing.\n\nSimilar gadgets and user scripts typically check mw.config.get( \u0027wgCanonicalSpecialPageName\u0027 ) \u003d\u003d\u003d \u0027Contributions\u0027 || â€¦. Wouldn\u0027t this solve the issue as well?",
      "parentUuid": "22d7b9d3_4ceff530",
      "range": {
        "startLine": 9,
        "startChar": 1,
        "endLine": 9,
        "endChar": 78
      },
      "revId": "6307661938aff4dc2b31b4e553665a1a9af282ab",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "528820e4_df1884b7",
        "filename": "modules/ext.ores.highlighter.js",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 34
      },
      "writtenOn": "2019-02-09T21:32:53Z",
      "side": 1,
      "message": "Thanks, that suggestion may be useful for ORES developers to considers at some point. Doing that would significantly alter the behaviour and contract provided by this module which is outside the scope of this patch and my work on generically improving performance for everyone by adopting generally better patterns for what the code currently does, today.",
      "parentUuid": "57008ecd_ba02c15a",
      "range": {
        "startLine": 9,
        "startChar": 1,
        "endLine": 9,
        "endChar": 78
      },
      "revId": "6307661938aff4dc2b31b4e553665a1a9af282ab",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}